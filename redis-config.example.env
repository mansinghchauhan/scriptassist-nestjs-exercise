# Redis Configuration Examples
# Copy this file to .env and configure according to your deployment

# ===========================================
# REDIS DEPLOYMENT MODE SELECTION
# ===========================================
# Choose ONE of the following deployment modes:

# For Single Redis Instance (Development)
# REDIS_CLUSTER=false
# REDIS_SENTINEL=false

# For Redis Cluster (Production - High Availability)
REDIS_CLUSTER=true
# REDIS_SENTINEL=false

# For Redis Sentinel (Production - Simple HA)
# REDIS_CLUSTER=false
# REDIS_SENTINEL=true

# ===========================================
# SINGLE INSTANCE CONFIGURATION
# ===========================================
# Used when both REDIS_CLUSTER and REDIS_SENTINEL are false

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0

# ===========================================
# REDIS CLUSTER CONFIGURATION
# ===========================================
# Used when REDIS_CLUSTER=true
# Requires at least 3 nodes for proper cluster operation

# Cluster Node 1
REDIS_NODE1_HOST=redis-node-1
REDIS_NODE1_PORT=7000

# Cluster Node 2
REDIS_NODE2_HOST=redis-node-2
REDIS_NODE2_PORT=7001

# Cluster Node 3
REDIS_NODE3_HOST=redis-node-3
REDIS_NODE3_PORT=7002

# Additional nodes (optional)
# REDIS_NODE4_HOST=redis-node-4
# REDIS_NODE4_PORT=7003
# REDIS_NODE5_HOST=redis-node-5
# REDIS_NODE5_PORT=7004
# REDIS_NODE6_HOST=redis-node-6
# REDIS_NODE6_PORT=7005

# Cluster-specific options
REDIS_CLUSTER_SCALE_READS=slave
REDIS_CLUSTER_MAX_REDIRECTIONS=16
REDIS_CLUSTER_RETRY_DELAY_ON_CLUSTER_DOWN=300
REDIS_CLUSTER_RETRY_DELAY_ON_FAILOVER=100
REDIS_CLUSTER_ENABLE_OFFLINE_QUEUE=false

# ===========================================
# REDIS SENTINEL CONFIGURATION
# ===========================================
# Used when REDIS_SENTINEL=true
# Requires at least 3 sentinel nodes for proper quorum

# Sentinel Node 1
REDIS_SENTINEL1_HOST=sentinel-1
REDIS_SENTINEL1_PORT=26379

# Sentinel Node 2
REDIS_SENTINEL2_HOST=sentinel-2
REDIS_SENTINEL2_PORT=26380

# Sentinel Node 3
REDIS_SENTINEL3_HOST=sentinel-3
REDIS_SENTINEL3_PORT=26381

# Master name in sentinel configuration
REDIS_MASTER_NAME=mymaster

# Sentinel-specific options
REDIS_SENTINEL_RETRY_DELAY_ON_FAILOVER=100
REDIS_SENTINEL_RETRY_DELAY_ON_CLUSTER_DOWN=300

# ===========================================
# COMMON CONFIGURATION OPTIONS
# ===========================================
# These options apply to all deployment modes

# Authentication
REDIS_PASSWORD=your_redis_password

# Connection settings
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_FAMILY=4
REDIS_KEEP_ALIVE=true
REDIS_NO_DELAY=true
REDIS_CONNECTION_NAME=taskflow-app

# Performance settings
REDIS_ENABLE_READY_CHECK=true
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_LAZY_CONNECT=true
REDIS_MAX_LOADING_TIMEOUT=10000

# ===========================================
# SECURITY CONFIGURATION
# ===========================================
# TLS/SSL Configuration (optional)

REDIS_TLS=false
REDIS_TLS_SERVERNAME=redis.example.com
REDIS_TLS_REJECT_UNAUTHORIZED=true

# ===========================================
# EXAMPLE CONFIGURATIONS
# ===========================================

# Example 1: Local Development (Single Instance)
# REDIS_CLUSTER=false
# REDIS_SENTINEL=false
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0

# Example 2: Production Cluster (AWS ElastiCache)
# REDIS_CLUSTER=true
# REDIS_SENTINEL=false
# REDIS_NODE1_HOST=your-cluster.cache.amazonaws.com
# REDIS_NODE1_PORT=6379
# REDIS_NODE2_HOST=your-cluster.cache.amazonaws.com
# REDIS_NODE2_PORT=6379
# REDIS_NODE3_HOST=your-cluster.cache.amazonaws.com
# REDIS_NODE3_PORT=6379
# REDIS_PASSWORD=your_auth_token
# REDIS_TLS=true

# Example 3: Production Sentinel (Self-hosted)
# REDIS_CLUSTER=false
# REDIS_SENTINEL=true
# REDIS_SENTINEL1_HOST=sentinel1.internal.com
# REDIS_SENTINEL1_PORT=26379
# REDIS_SENTINEL2_HOST=sentinel2.internal.com
# REDIS_SENTINEL2_PORT=26379
# REDIS_SENTINEL3_HOST=sentinel3.internal.com
# REDIS_SENTINEL3_PORT=26379
# REDIS_MASTER_NAME=mymaster
# REDIS_PASSWORD=your_redis_password

# Example 4: Docker Compose Development
# REDIS_CLUSTER=true
# REDIS_SENTINEL=false
# REDIS_NODE1_HOST=redis-node-1
# REDIS_NODE1_PORT=7000
# REDIS_NODE2_HOST=redis-node-2
# REDIS_NODE2_PORT=7001
# REDIS_NODE3_HOST=redis-node-3
# REDIS_NODE3_PORT=7002
# REDIS_PASSWORD=redis_password

# ===========================================
# MONITORING AND HEALTH CHECKS
# ===========================================
# The application will automatically monitor Redis health
# Check /health/detailed endpoint for Redis status

# Health check intervals are configured in the application
# Circuit breaker thresholds are set in the RedisConnectionService
